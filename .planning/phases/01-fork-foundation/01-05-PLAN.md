---
phase: 01-fork-foundation
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/opencode/src/cli/cmd/tui/app.tsx
  - packages/opencode/src/cli/logo.ts
  - packages/opencode/src/cli/ui.ts
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Terminal window title shows CodeMAD, not OpenCode"
    - "ASCII art is clean without marks/fades"
    - "ASCII art is slightly bigger (4 lines instead of 3 for letters)"
    - "CLI help shows MAD in red accent color via ANSI codes"
  artifacts:
    - path: "packages/opencode/src/cli/cmd/tui/app.tsx"
      provides: "Terminal title setter"
      pattern: 'setTerminalTitle.*CodeMAD'
    - path: "packages/opencode/src/cli/logo.ts"
      provides: "Clean ASCII art without marks"
      contains: "no marks export or empty marks"
    - path: "packages/opencode/src/cli/ui.ts"
      provides: "CLI logo with red MAD"
      pattern: '91m.*MAD|FF3300'
  key_links:
    - from: "packages/opencode/src/index.ts"
      to: "packages/opencode/src/cli/ui.ts"
      via: "UI.logo() call in yargs usage"
      pattern: "UI\\.logo\\(\\)"
---

<objective>
Close 3 UAT gaps from Phase 1 rebrand verification:

1. **Terminal title** (major): Window title shows "OpenCode" instead of "CodeMAD"
2. **ASCII art** (cosmetic): Logo has marks (_^~) creating fade effects around letters
3. **CLI help colors** (cosmetic): Both CODE and MAD show in yellow/gold; MAD should be red

Purpose: Complete the visual rebrand by fixing terminal title, cleaning up ASCII art, and applying brand colors in CLI output.

Output: Terminal title says CodeMAD, clean ASCII art without marks, MAD portion renders in red (#FF3300) in CLI help.
</objective>

<execution_context>
@/Users/costantinomarcello/.claude/get-shit-done/workflows/execute-plan.md
@/Users/costantinomarcello/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-fork-foundation/01-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix terminal window title</name>
  <files>
    - packages/opencode/src/cli/cmd/tui/app.tsx
  </files>
  <action>
Update the terminal title references in packages/opencode/src/cli/cmd/tui/app.tsx:

1. Line 219: Change `renderer.setTerminalTitle("OpenCode")` to `renderer.setTerminalTitle("CodeMAD")`

2. Line 226: Change `renderer.setTerminalTitle("OpenCode")` to `renderer.setTerminalTitle("CodeMAD")`

3. Line 232: Change `renderer.setTerminalTitle("OC | ${title}")` to `renderer.setTerminalTitle("CM | ${title}")`
   - "CM" is the 2-letter abbreviation for CodeMAD (parallel to "OC" for OpenCode)

These are the only 3 places where terminal title is set in the TUI.
  </action>
  <verify>
    - `grep -n 'OpenCode' packages/opencode/src/cli/cmd/tui/app.tsx` returns NO matches for terminal title context
    - `grep -n 'setTerminalTitle.*CodeMAD' packages/opencode/src/cli/cmd/tui/app.tsx` returns 2 matches
    - `grep -n 'CM |' packages/opencode/src/cli/cmd/tui/app.tsx` returns 1 match
  </verify>
  <done>
    Terminal window title shows "CodeMAD" on home screen and "CM | [session title]" for named sessions
  </done>
</task>

<task type="auto">
  <name>Task 2: Redesign ASCII art without marks</name>
  <files>
    - packages/opencode/src/cli/logo.ts
  </files>
  <action>
Redesign the ASCII art in packages/opencode/src/cli/logo.ts to be:
1. Clean without marks (_^~) that create fade effects
2. Slightly bigger (add one more line for more presence)

Current logo structure (3 letter lines):
```ts
export const logo = {
  left: ["                   ", "█▀▀▀ █▀▀█ █▀▀▄ █▀▀▀", "█    █  █ █  █ █▀▀ ", "▀▀▀▀ ▀▀▀▀ ▀▀▀▀ ▀▀▀▀"],
  right: ["              ", "█▄^▄█ █▀▀█ █▀▀▄", "█_▀_█ █^^█ █__█", "▀~~~▀ ▀~~▀ ▀▀▀▀"],
}
export const marks = "_^~"
```

Replace with clean, slightly taller design (4 letter lines):
```ts
export const logo = {
  left: [
    "                      ",
    " █▀▀▀ █▀▀█ █▀▀▄ █▀▀▀ ",
    " █    █  █ █  █ █▀▀▀ ",
    " █▄▄▄ █▄▄█ █▄▄▀ █▄▄▄ ",
    "                      ",
  ],
  right: [
    "                   ",
    " █▄ ▄█ █▀▀█ █▀▀▄  ",
    " █ ▀ █ █▀▀█ █  █  ",
    " █   █ █  █ █▄▄▀  ",
    "                   ",
  ],
}

// Empty marks - no special character replacement needed for clean look
export const marks = ""
```

Key changes:
- Added top and bottom padding lines for visual weight
- Removed _^~ marks from right side (MAD)
- Made letters use consistent block characters
- Empty marks string disables mark-based coloring (TUI still colors by theme)
- Slightly wider spacing for legibility
  </action>
  <verify>
    - `grep '_\^~' packages/opencode/src/cli/logo.ts` returns NO matches
    - `grep 'marks = ""' packages/opencode/src/cli/logo.ts` returns 1 match
    - Logo arrays have 5 elements each (was 4)
  </verify>
  <done>
    ASCII art is clean without marks/fades and has 5 lines (taller) instead of 4
  </done>
</task>

<task type="auto">
  <name>Task 3: Apply red ANSI color to MAD in CLI help</name>
  <files>
    - packages/opencode/src/cli/ui.ts
  </files>
  <action>
Update the UI.logo() function in packages/opencode/src/cli/ui.ts to apply red color to the MAD portion (right side) in CLI output.

Current behavior: Both CODE and MAD render in gray/white tones. The marks-based coloring (`_^~`) only works in TUI context with the theme system. For CLI help output, we need direct ANSI codes.

Modify the `logo()` function (lines 43-89):

1. Add a red color constant for MAD portion:
```ts
const red = "\x1b[91m"  // Bright red - matches brand #FF3300 intent
```

2. Update the `right` side rendering (around line 51-55) to use red instead of reset:
```ts
const right = {
  fg: "\x1b[91m",         // Red for MAD text (was: reset which is white)
  shadow: "\x1b[38;5;52m", // Dark red shadow (was: gray 238)
  bg: "\x1b[48;5;52m",     // Dark red background for marks (was: gray 238)
}
```

The `draw()` function already uses `fg` for text characters, so this change will make the MAD portion render in red.

Note: The TUI component (logo.tsx) already uses `theme.primary` for the right side, so TUI rendering is correct. This fix is specifically for the CLI help output which uses UI.logo() directly.
  </action>
  <verify>
    - `grep '91m' packages/opencode/src/cli/ui.ts` returns matches (red ANSI code)
    - `bun dev --help 2>&1 | head -10` shows MAD portion in red (visual check)
  </verify>
  <done>
    CLI help output shows CODE in gray/white and MAD in red accent color
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Type check:
   ```bash
   bun turbo typecheck
   ```
   Must pass without errors

2. Terminal title verification (requires TUI):
   ```bash
   # Start TUI and check terminal window title
   bun dev
   # Terminal title should say "CodeMAD"
   ```

3. CLI banner verification:
   ```bash
   bun dev --help 2>&1 | head -15
   ```
   - ASCII art should be clean (no fade artifacts)
   - ASCII art should be taller (5 lines)
   - MAD portion should appear in red (ANSI color)

4. Code verification:
   ```bash
   # No OpenCode in terminal title context
   grep -n 'setTerminalTitle.*OpenCode' packages/opencode/src/cli/cmd/tui/app.tsx
   # Should return nothing

   # No marks in logo
   grep '_\^~' packages/opencode/src/cli/logo.ts
   # Should return nothing

   # Red color in right side
   grep '91m' packages/opencode/src/cli/ui.ts
   # Should return match
   ```
</verification>

<success_criteria>
1. Terminal window title shows "CodeMAD" (not "OpenCode")
2. Session title prefix is "CM |" (not "OC |")
3. ASCII art has no marks (_^~) creating fade effects
4. ASCII art is 5 lines tall (was 4)
5. CLI help shows MAD portion in red ANSI color
6. Type check passes
</success_criteria>

<output>
After completion, create `.planning/phases/01-fork-foundation/01-05-SUMMARY.md`
</output>
