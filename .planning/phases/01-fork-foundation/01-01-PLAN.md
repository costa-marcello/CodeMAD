---
phase: 01-fork-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
  - package.json
  - packages/opencode/package.json
  - packages/desktop/tauri.conf.json
  - packages/desktop/Cargo.toml
  - packages/desktop/icons/*
  - packages/app/src/components/About.tsx
autonomous: true

must_haves:
  truths:
    - "Application shows 'CodeMAD' in window title, not 'OpenCode'"
    - "CLI binary is named 'codemad', not 'opencode'"
    - "App icon displays CodeMAD branding"
    - "About page shows CodeMAD name and description"
  artifacts:
    - path: "packages/desktop/tauri.conf.json"
      provides: "Tauri desktop configuration"
      contains: "CodeMAD"
    - path: "packages/opencode/package.json"
      provides: "CLI package definition"
      contains: "codemad"
    - path: "README.md"
      provides: "Project documentation"
      contains: "CodeMAD"
  key_links:
    - from: "packages/desktop/tauri.conf.json"
      to: "packages/desktop/Cargo.toml"
      via: "productName must match Cargo package name"
      pattern: "name.*codemad"
---

<objective>
Fork OpenCode repository and rebrand all touchpoints to establish CodeMAD as a distinct product.

Purpose: Create the foundation for all subsequent CodeMAD development. Without a clean fork and rebrand, the project has no identity and cannot be distributed.

Output: A buildable CodeMAD application with correct branding in all locations (window title, CLI name, icons, documentation).
</objective>

<execution_context>
@/Users/costantinomarcello/.claude/get-shit-done/workflows/execute-plan.md
@/Users/costantinomarcello/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-fork-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fork OpenCode and initialize CodeMAD structure</name>
  <files>
    - All files from github.com/anomalyco/opencode
    - README.md
    - package.json
    - .gitignore
  </files>
  <action>
1. Clone OpenCode repository:
   ```bash
   git clone https://github.com/anomalyco/opencode.git .
   rm -rf .git
   git init
   ```

2. Update root package.json:
   - Change `"name": "opencode"` to `"name": "codemad"`
   - Update description to reflect CodeMAD
   - Keep all workspace configurations intact

3. Update root README.md:
   - Replace "OpenCode" with "CodeMAD" throughout
   - Update project description to reflect CodeMAD's focus
   - Keep technical documentation structure but update branding

4. Preserve .gitignore and other config files as-is (they work for the fork)

Note: Do NOT modify code logic in this task - only branding in root-level files.
  </action>
  <verify>
    - `grep -r "opencode" package.json` returns no matches for package name
    - `grep -i "codemad" README.md` returns matches
    - Directory structure matches OpenCode's packages/ layout
  </verify>
  <done>
    Root package.json has name "codemad", README references CodeMAD, and full OpenCode codebase is present
  </done>
</task>

<task type="auto">
  <name>Task 2: Rebrand Tauri desktop application</name>
  <files>
    - packages/desktop/tauri.conf.json
    - packages/desktop/src-tauri/Cargo.toml
    - packages/desktop/icons/* (all icon files)
  </files>
  <action>
1. Update packages/desktop/tauri.conf.json:
   - `"productName": "CodeMAD"` (was "OpenCode")
   - `"identifier": "com.codemad.app"` (was com.opencode.*)
   - Window title: `"title": "CodeMAD"`
   - Bundle icons array remains same paths

2. Update packages/desktop/src-tauri/Cargo.toml:
   - `[package] name = "codemad"` (CRITICAL: must match productName for macOS Activity Monitor)
   - Update description

3. For icons (packages/desktop/icons/):
   - Create placeholder icons with "CM" text (can be refined later)
   - Required files: 32x32.png, 128x128.png, 128x128@2x.png, icon.icns (macOS), icon.ico (Windows)
   - Use imagemagick or similar to generate from text: `convert -size 128x128 -gravity center -background "#1a1a2e" -fill "#00d4ff" label:"CM" icon.png`

Note on Pitfall: Cargo.toml package name and tauri.conf.json productName must align, or macOS Activity Monitor shows wrong name (from research).
  </action>
  <verify>
    - `grep "CodeMAD" packages/desktop/tauri.conf.json` returns productName and title matches
    - `grep "codemad" packages/desktop/src-tauri/Cargo.toml` returns package name match
    - All icon files exist in packages/desktop/icons/
  </verify>
  <done>
    Tauri config shows "CodeMAD" as product name and window title, Cargo.toml has matching package name, icon placeholders exist
  </done>
</task>

<task type="auto">
  <name>Task 3: Rebrand CLI and UI components</name>
  <files>
    - packages/opencode/package.json
    - packages/app/src/components/About.tsx (or equivalent)
    - packages/ui/src/* (any hardcoded branding)
  </files>
  <action>
1. Update packages/opencode/package.json:
   - `"name": "@codemad/cli"` (scoped to avoid npm collisions - from research pitfall)
   - `"bin": { "codemad": "./dist/cli.js" }` (was "opencode")
   - Update description

2. Find and update About component (search for "About" in packages/app/src/):
   - Replace "OpenCode" text with "CodeMAD"
   - Update any version/copyright strings
   - Keep existing styling/layout

3. Search for hardcoded "OpenCode" strings in UI:
   ```bash
   grep -r "OpenCode" packages/app/src/ packages/ui/src/
   ```
   - Replace all instances with "CodeMAD"

4. Update any other package.json files in packages/* that reference "opencode" in their name
   - Use @codemad/* scope for all packages

Note: Maintain the existing code structure - only change string literals and package names.
  </action>
  <verify>
    - `grep -r '"opencode"' packages/*/package.json` returns no direct name matches (only dependencies)
    - `grep -ri "opencode" packages/app/src/ packages/ui/src/` returns minimal/no branding matches
    - CLI binary name is "codemad" in package.json bin field
  </verify>
  <done>
    All package.json files use @codemad/* scope, CLI binary is "codemad", UI shows "CodeMAD" in About and any other visible locations
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Build verification:
   ```bash
   bun install
   bun run build
   ```
   Build should complete without errors

2. Branding verification:
   ```bash
   grep -r "OpenCode" packages/desktop/tauri.conf.json  # Should return nothing
   grep -r "codemad" packages/desktop/src-tauri/Cargo.toml  # Should return package name
   ls packages/desktop/icons/  # Should show all icon files
   ```

3. Package name verification:
   ```bash
   cat package.json | grep '"name"'  # Should show "codemad"
   cat packages/opencode/package.json | grep '"name"'  # Should show "@codemad/cli"
   ```
</verification>

<success_criteria>
1. Application builds successfully with `bun run build`
2. Window title shows "CodeMAD" (verified in tauri.conf.json)
3. CLI is named "codemad" (verified in package.json bin field)
4. All package.json files use @codemad/* naming
5. No "OpenCode" branding remains in user-visible strings
6. Icon placeholder files exist for all required formats
</success_criteria>

<output>
After completion, create `.planning/phases/01-fork-foundation/01-01-SUMMARY.md`
</output>
